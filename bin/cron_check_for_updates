#! /bin/sh

/usr/local/bin/update_forwaders

if ! test -f /run/need_reconfig
	then
		logger -t "cron_check_for_updates[$$]" "Forwarders list not changed"
		exit 0
	fi

rm -f /run/need_reconfig
logger -t "cron_check_for_updates[$$]" "Forwarders list changed"
if named-checkconf -t /run/named -c /etc/named.conf 2>&1 | logger -t "cron_check_for_updates[$$]"
	then
		rndc reconfig
	fi
